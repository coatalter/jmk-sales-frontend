@import "tailwindcss";

/* =========================================
   1. VARIABLES & THEME CONFIG
   ========================================= */
@layer base {
  /* --- MODE TERANG (SOFT / TIDAK TERLALU SILAU) --- */
  :root {
    --brand-primary: #4f46e5;
    --brand-hover: #4338ca;

    /* Backgrounds: Menggunakan Zinc Soft, bukan Putih Murni yang menyilaukan */
    --bg-body: #e4e4e7;         /* Zinc-200: Abu lembut */
    --bg-card: #f4f4f5;         /* Zinc-100: Off-white */
    --bg-sidebar: #f4f4f5;      /* Zinc-100 */
    --bg-input: #ffffff;        /* Putih */
    --bg-hover: #e4e4e7;        /* Zinc-200 */
    
    /* Text (Zinc Palette) */
    --text-main: #18181b;       /* Zinc-900: Hitam Soft */
    --text-muted: #52525b;      /* Zinc-600: Abu Sedang */
    --text-inverse: #ffffff;    /* Putih */
    
    /* Borders */
    --border-color: #d4d4d8;    /* Zinc-300 */
  }

  /* --- MODE GELAP (ZINC THEME) --- */
  html.dark {
    /* Backgrounds (Zinc Palette) */
    --bg-body: #09090b;         /* Zinc-950 */
    --bg-card: #18181b;         /* Zinc-900 */
    --bg-sidebar: #18181b;      /* Zinc-900 */
    --bg-input: #27272a;        /* Zinc-800 */
    --bg-hover: #27272a;        /* Zinc-800 */
    
    /* Text */
    --text-main: #f4f4f5;       /* Zinc-100 */
    --text-muted: #a1a1aa;      /* Zinc-400 */
    --text-inverse: #ffffff;
    
    /* Borders */
    --border-color: #27272a;    /* Zinc-800 */
  }

  html, body, #root { 
    height: 100%; 
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
  }

  body {
    background-color: var(--bg-body);
    color: var(--text-main);
    @apply antialiased transition-colors duration-300;
  }
}

/* =========================================
   2. UTILITY CLASSES (Komponen UI)
   ========================================= */
@layer components {
  /* Helper Text Colors */
  .text-main { color: var(--text-main); }
  .text-muted { color: var(--text-muted); }
  .border-theme { border-color: var(--border-color); }

  /* --- KARTU (CARD & KPI) --- */
  .card, .kpi {
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
    color: var(--text-main);
    @apply rounded-xl p-6 shadow-sm;
    transition: background-color 0.3s, border-color 0.3s;
  }
  
  .kpi { @apply flex flex-col justify-between h-full; }
  .kpi:hover {
    transform: translateY(-2px);
    @apply border-indigo-500 shadow-md transition-transform duration-200;
  }
  .kpi-title { 
    color: var(--text-muted);
    @apply text-xs font-bold uppercase tracking-wider mb-2; 
  }
  .kpi-value { 
    color: var(--text-main); 
    @apply text-3xl font-extrabold tracking-tight mt-auto; 
  }

  /* --- SIDEBAR --- */
  .layout-aside {
    background-color: var(--bg-sidebar);
    border-right: 1px solid var(--border-color);
    color: var(--text-main);
    @apply w-64 h-screen sticky top-0 p-6 flex flex-col z-20 transition-colors duration-300;
  }
  .layout-main { @apply flex-1 p-8 min-h-screen relative overflow-x-hidden; }

  /* --- AVATAR --- */
  .user-avatar {
    @apply w-10 h-10 rounded-xl flex items-center justify-center font-bold text-sm text-indigo-800 shadow-sm ring-2 ring-white;
    background: linear-gradient(135deg, #c7d2fe 0%, #a5b4fc 100%);
  }
  html.dark .user-avatar {
    @apply ring-zinc-700 text-indigo-100;
    background: linear-gradient(135deg, #4f46e5 0%, #3730a3 100%);
  }

  /* --- INPUTS, SELECT, TEXTAREA --- */
  .input-field, select, textarea {
    background-color: var(--bg-input);
    border: 1px solid var(--border-color);
    color: var(--text-main);
    @apply w-full rounded-lg px-4 py-3 text-sm shadow-sm transition-colors duration-200 appearance-none;
  }
  .input-field::placeholder, textarea::placeholder { 
    color: var(--text-muted); opacity: 0.8;
  }
  .input-field:focus, select:focus, textarea:focus { 
    @apply outline-none border-indigo-500 ring-4 ring-indigo-500/10; 
  }
  html.dark select { color-scheme: dark; }

/* --- BUTTONS --- */
  .btn { 
    @apply inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-lg font-medium text-sm transition-all active:scale-[0.98] cursor-pointer; 
  }
  
  /* 1. BUTTON PRIMARY (Solid Brand Color) */
  /* Digunakan untuk: Tombol 'Deal', 'Salin', Filter Aktif */
  .btn-primary {
    color: #ffffff; /* Selalu putih agar kontras */
    background: linear-gradient(to bottom right, var(--brand-primary), var(--brand-hover));
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    border: 1px solid transparent;
  }
  .btn-primary:hover { 
    filter: brightness(110%); 
    box-shadow: 0 10px 15px -3px rgba(79, 70, 229, 0.3); /* Shadow ungu halus */
    transform: translateY(-1px);
  }
  
  /* 2. BUTTON GHOST (Transparent / Outline) */
  /* Digunakan untuk: Tombol 'Batal', 'Reset Filter', Filter Non-Aktif */
  .btn-ghost {
    color: var(--text-muted);
    background-color: transparent;
    border: 1px solid transparent;
  }
  .btn-ghost:hover {
    background-color: var(--bg-hover);
    color: var(--text-main);
    border-color: var(--border-color);
  }

  /* 3. BUTTON SOFT (Semi-Transparent Badge Style) */
  /* Digunakan untuk: Tombol 'Hubungi' (Call Action) */
  .btn-soft {
    /* Mode Terang: Ungu pudar */
    background-color: rgba(79, 70, 229, 0.08); 
    color: var(--brand-primary);
    border: 1px solid rgba(79, 70, 229, 0.1);
    font-weight: 700; /* Lebih tebal agar terbaca */
  }
  
  .btn-soft:hover {
    /* Hover: Menjadi Solid agar mencolok */
    background-color: var(--brand-primary);
    color: #ffffff;
    border-color: var(--brand-primary);
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.25);
    transform: translateY(-1px);
  }

  /* Penyesuaian Otomatis Dark Mode untuk Btn-Soft */
  html.dark .btn-soft {
    background-color: rgba(99, 102, 241, 0.15); /* Lebih terang dikit di dark mode */
    color: #a5b4fc; /* Indigo-300 */
    border-color: rgba(99, 102, 241, 0.2);
  }
  html.dark .btn-soft:hover {
    background-color: var(--brand-primary);
    color: #ffffff;
  }
  
  /* Helper Size */
  .btn-small { 
    @apply text-xs px-3 py-1.5 rounded-md; 
  }

  /* --- TABLES --- */
  .table-scroll { 
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
    @apply overflow-x-auto rounded-xl shadow-sm;
  }
  table { @apply w-full text-left text-sm border-collapse; }
  
  thead { 
    border-bottom: 1px solid var(--border-color);
    background-color: var(--bg-hover);
  }
  thead th { 
    color: var(--text-muted);
    @apply px-6 py-4 font-semibold text-xs uppercase tracking-wider whitespace-nowrap;
  }
  
  tbody tr { 
    border-bottom: 1px solid var(--border-color);
    @apply last:border-0 transition-colors; 
  }
  tbody tr:hover { background-color: var(--bg-hover); }
  tbody td { 
    color: var(--text-main); 
    @apply px-6 py-4 align-middle; 
  }

  /* --- PAGINATION --- */
  .pagination-container {
    border-top: 1px solid var(--border-color);
    @apply flex flex-col md:flex-row items-center justify-between gap-4 pt-6 mt-2;
  }
  .pagination-btn {
    background-color: var(--bg-input); 
    border: 1px solid var(--border-color); 
    color: var(--text-main);
    @apply w-9 h-9 flex items-center justify-center rounded-lg text-sm font-medium transition-all hover:border-indigo-500 hover:text-indigo-600 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed;
  }
  .pagination-current { 
    background-color: var(--brand-primary) !important;
    border: 1px solid var(--brand-primary) !important;
    color: white !important;
    @apply w-9 h-9 flex items-center justify-center rounded-lg text-sm font-bold shadow-md z-10;
  }

  /* --- BADGES & PROGRESS BAR --- */
  .badge-new { 
    @apply inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border shadow-sm;
    background-color: rgba(59, 130, 246, 0.1);     
    color: rgb(37, 99, 235);                        
    border-color: rgba(59, 130, 246, 0.2);
  }
  html.dark .badge-new { 
    background-color: rgba(59, 130, 246, 0.2);
    color: #93c5fd;                                 
    border-color: rgba(59, 130, 246, 0.4);
  }

  .badge-success { 
    @apply inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border shadow-sm;
    background-color: rgba(16, 185, 129, 0.1);      
    color: rgb(5, 150, 105);                         
    border-color: rgba(16, 185, 129, 0.2);
  }
  html.dark .badge-success { 
    background-color: rgba(16, 185, 129, 0.2);
    color: #6ee7b7;                                  
    border-color: rgba(16, 185, 129, 0.4);
  }

  .badge-failed { 
    @apply inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border shadow-sm;
    background-color: rgba(244, 63, 94, 0.1);       
    color: rgb(190, 18, 60);                         
    border-color: rgba(244, 63, 94, 0.2);
  }
  html.dark .badge-failed { 
    background-color: rgba(244, 63, 94, 0.2);
    color: #fecdd3;                                  
    border-color: rgba(244, 63, 94, 0.4);
  }

  .badge-progress { 
    @apply inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border shadow-sm;
    background-color: rgba(245, 158, 11, 0.1);      
    color: rgb(217, 119, 6);                         
    border-color: rgba(245, 158, 11, 0.2);
  }
  html.dark .badge-progress { 
    background-color: rgba(245, 158, 11, 0.2);
    color: #fcd34d;                                  
    border-color: rgba(245, 158, 11, 0.4);
  }

  .progress-track { background-color: var(--bg-hover); @apply w-full rounded-full h-2 overflow-hidden shadow-inner; }
  .progress-fill { background: linear-gradient(90deg, #6366f1, #8b5cf6); @apply h-full rounded-full transition-all duration-700 ease-out; }

  /* --- MODAL --- */
  .modal-backdrop {
    position: fixed; inset: 0; z-index: 50;
    background-color: rgba(0, 0, 0, 0.5);
    @apply flex items-center justify-center p-4 backdrop-blur-sm transition-opacity;
    animation: fadeIn 0.2s ease-out;
  }
  .modal-panel {
    background-color: var(--bg-card); border: 1px solid var(--border-color); color: var(--text-main);
    @apply rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden;
    animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }
  .modal-header { border-bottom: 1px solid var(--border-color); @apply p-6 flex justify-between items-start; }

  /* --- CHOICES --- */
  .contact-choice.border { 
    background-color: var(--bg-input); border: 2px solid var(--border-color); color: var(--text-muted);
    @apply flex-1 py-3 px-4 rounded-xl text-sm font-medium transition-all text-center focus:outline-none cursor-pointer hover:border-indigo-300;
  }
  html.dark .contact-choice.border:hover { border-color: #6366f1; color: #fff; }

  .contact-choice-new { 
    @apply flex-1 py-3 px-4 rounded-xl border-2 text-sm font-medium transition-all text-center 
           focus:outline-none cursor-pointer border-blue-500 bg-blue-50 text-blue-700 shadow-sm;
  }
  html.dark .contact-choice-new { 
    @apply bg-blue-900/30 text-blue-300 border-blue-500;
  }

  .contact-choice-success { 
    @apply flex-1 py-3 px-4 rounded-xl border-2 text-sm font-medium transition-all text-center 
           focus:outline-none cursor-pointer border-emerald-500 bg-emerald-50 text-emerald-700 shadow-sm;
  }
  html.dark .contact-choice-success {
    @apply bg-emerald-900/30 text-emerald-300 border-emerald-500;
  }

  .contact-choice-failed { 
    @apply flex-1 py-3 px-4 rounded-xl border-2 text-sm font-medium transition-all text-center 
           focus:outline-none cursor-pointer border-rose-500 bg-rose-50 text-rose-700 shadow-sm;
  }
  html.dark .contact-choice-failed {
    @apply bg-rose-900/30 text-rose-300 border-rose-500;
  }

  .contact-choice-progress { 
    @apply flex-1 py-3 px-4 rounded-xl border-2 text-sm font-medium transition-all text-center 
           focus:outline-none cursor-pointer border-amber-400 bg-amber-50 text-amber-700 shadow-sm;
  }
  html.dark .contact-choice-progress {
    @apply bg-amber-900/30 text-amber-300 border-amber-500;
  }

/* =========================================
   3. ANIMATIONS
   ========================================= */
@keyframes indeterminate {
  0% { left: -50%; }
  50% { left: 50%; }
  100% { left: 100%; }
}

.animate-indeterminate {
  animation: indeterminate 1.5s infinite linear;
}

/* Class ini tetap bisa dipakai di HTML jika mau */
.animate-fade-in {
  animation: fadeIn 0.5s ease-in-out;
}

.animate-fade-in-up {
  animation: fadeInUp 0.6s ease-out forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(5px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideUp { 
  from { opacity: 0; transform: translateY(15px) scale(0.98); } 
  to { opacity: 1; transform: translateY(0) scale(1); } 
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translate3d(0, 20px, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}


/* =========================================
     4. CALL INTERFACE (Clean Theme Based)
     ========================================= */

  /* --- Container Utama --- */
  .call-window {
    /* Gunakan variabel background dengan sedikit transparansi untuk efek glass */
    background-color: var(--bg-card); 
    border: 1px solid var(--border-color);
    
    /* Bayangan halus */
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    
    /* Layout & Animasi */
    @apply fixed bottom-6 right-6 z-[9999] w-[95vw] md:w-[900px] h-[650px] rounded-2xl flex flex-col overflow-hidden transition-colors duration-300;
    
    /* Tambahan backdrop blur manual jika browser support */
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    
    /* Animasi masuk */
    animation: fadeInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }
  
  /* Override transparansi khusus dark mode via CSS nesting */
  html.dark .call-window {
    background-color: rgba(24, 24, 27, 0.9); /* Zinc-900 agak transparan */
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.7);
  }

  /* --- Container Minimized --- */
  .call-window-minimized {
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
    @apply fixed bottom-6 right-6 z-[9999] w-80 rounded-2xl shadow-xl flex items-center justify-between p-4 cursor-pointer transition-all duration-300;
    animation: slideUp 0.4s ease-out forwards;
  }
  .call-window-minimized:hover {
    background-color: var(--bg-hover);
    transform: translateY(-4px);
  }

  /* --- Header --- */
  .call-header {
    background-color: var(--bg-hover); /* Sedikit beda dari body card */
    border-bottom: 1px solid var(--border-color);
    @apply h-16 flex items-center justify-between px-6 select-none;
  }

  .call-avatar-lg {
    @apply w-10 h-10 rounded-xl flex items-center justify-center font-bold text-white text-lg shadow-lg;
    /* Gradient Brand */
    background: linear-gradient(135deg, var(--brand-primary) 0%, #a5b4fc 100%);
  }

  .call-timer-pill {
    background-color: var(--bg-input); /* Putih di light, gelap di dark */
    border: 1px solid var(--border-color);
    @apply px-4 py-1.5 rounded-full shadow-inner;
  }
  .call-timer-text {
    color: var(--brand-primary);
    @apply font-mono font-bold text-sm tracking-widest;
  }

  /* --- Layout Kolom --- */
  .call-col-left {
    background-color: var(--bg-card);
    border-right: 1px solid var(--border-color);
    @apply w-7/12 flex flex-col relative;
  }
  .call-col-right {
    background-color: rgba(128, 128, 128, 0.05); /* Sedikit tint */
    @apply w-5/12 flex flex-col;
  }

  /* --- Tabs --- */
  .call-tab-btn {
    color: var(--text-muted);
    @apply flex-1 py-4 text-[11px] font-bold uppercase tracking-widest transition-all relative opacity-70;
  }
  .call-tab-btn:hover { opacity: 1; color: var(--text-main); }
  .call-tab-btn.active { opacity: 1; color: var(--brand-primary); }
  .call-tab-btn.active::after {
    content: ""; position: absolute; bottom: 0; left: 0; width: 100%; height: 2px;
    background-color: var(--brand-primary);
  }

  /* --- Cards (Script & Info) --- */
  .call-card-glass {
    background-color: var(--bg-hover); /* Menggunakan bg-hover (Zinc-200 / Zinc-800) */
    border: 1px solid var(--border-color);
    @apply p-5 rounded-xl shadow-sm transition-colors mb-4;
  }
  /* Heading kecil di dalam card */
  .call-card-label {
    color: var(--brand-primary);
    @apply text-[10px] font-bold uppercase mb-2 tracking-wider;
  }
  /* Isi text di dalam card */
  .call-card-text {
    color: var(--text-main);
    @apply text-sm font-medium leading-relaxed;
  }

  /* --- Notepad --- */
  .call-notepad-header {
    border-bottom: 1px solid var(--border-color);
    @apply p-3 px-5 flex justify-between items-center text-[10px] font-bold uppercase tracking-wide opacity-80;
    background-color: rgba(234, 179, 8, 0.1); /* Kuning tipis transparan */
    color: #ca8a04; /* Text kuning gelap */
  }
  html.dark .call-notepad-header { color: #facc15; } /* Kuning terang di dark mode */
  
  .call-textarea {
    color: var(--text-main);
    @apply flex-1 bg-transparent p-5 resize-none focus:outline-none font-mono text-sm leading-6;
  }

/* --- Footer & Actions --- */
  .call-footer {
    background-color: var(--bg-sidebar); 
    border-top: 1px solid var(--border-color);
    @apply h-20 flex items-center justify-center gap-6;
  }

  .btn-action { 
    @apply py-3 rounded-xl text-white font-bold text-xs shadow transition-transform active:scale-95 flex items-center justify-center gap-2 hover:opacity-90; 
  }
  
  .control-icon { 
    background-color: var(--bg-hover);
    color: var(--text-muted);
    /* HAPUS 'hover:text-main' dari @apply di bawah ini */
    @apply w-10 h-10 rounded-full flex items-center justify-center transition-all hover:scale-110 active:scale-90; 
  }

  /* TAMBAHKAN INI: Logic hover manual menggunakan variable CSS */
  .control-icon:hover {
    color: var(--text-main);
  }


}